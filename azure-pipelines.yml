trigger:
- main

pool:
  vmImage: 'windows-latest'

steps:
- task: UseNode@1
  inputs:
    versionSpec: '14'
    addToPath: true

- script: |
    npm install
    npm test
    npm run build
  displayName: 'Install dependencies, run tests, and build'

- task: Docker@2
  inputs:
    containerRegistry: 'youracr' # replace with your Azure Container Registry name
    repository: 'your-image-name'
    command: 'buildAndPush'
    Dockerfile: '**/Dockerfile'
    tags: |
      $(Build.BuildId)
